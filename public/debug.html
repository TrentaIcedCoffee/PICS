<html>
    <head>
        <style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>
        <meta charset="utf-8">
        <!-- jQuery 2.0.0 CDN -->
        <script src="http://code.jquery.com/jquery-2.0.0.js"></script>
        <!-- Angular CDN -->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
        <!-- bootstrap 3 CDN -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <!-- bootstrap select CDN -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
        <!-- font -->
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <!-- customized packages -->
        <script src="js/exceptions.js"></script>
        <script src="js/date.js"></script>
        <script src="js/util.js"></script>
        <script src="js/crypto/core.js"></script>
        <script src="js/crypto/enc-base64.js"></script>
        <script src="js/crypto/hmac.js"></script>
        <script src="js/crypto/sha256.js"></script>
        <script src="js/crypto/util.js"></script>
        <title>Redirect - Debug</title>
        <style>
            .navbar-inverse .navbar-brand {
                color: rgba(235, 235, 235, 1);
            }
            .interact {
                font-size: 18px !important;
            }
            .express {
                color: rgba(235, 235, 235, 1);
            }
            .express-inverse {
                color: rgba(0, 0, 0, 1) !important;
            }
            .express-large {
                font-size: 22px !important;
            }
            .express-medium {
                font-size: 20px !important;
            }
            .express-small {
                font-size: 18px !important;
            }
            .input-group {
                width: 100%;
            }
            .btn-full {
                width: 100%;
            }
            .ul-wide {
                width: 100%;
            }
            .ul-wide li.dropdown-header {
                padding-left: 4%;
            }
            .ul-wide li {
                padding-left: 6%;
            }
            .ul-responsive li:hover {
                background-color: rgba(200, 200, 200, 1);
            }
            .select-full {
                width: 100%;
            }
            .error {
                color: red;
                display: none;
            }
            html, body {
                width: 100%;
                font-family: 'Roboto', sans-serif;
                background: rgba(240, 240, 240, 0.3);
            }
            #header {
                height: 50px;
            }
            #header div a {
                margin: 0px;
                float: none;
                display: block;
                text-align: center;
            }
            #header div input {
                width: 100%;
            }
            #header div.col-md-3.navbar-header a:hover {
                background-color: rgba(80, 80, 80, 0.7);
                cursor: pointer;
            }
            #private-info {
                position: absolute;
                display: none;
            }
            #private-basic, #private-general, #private-depts_and_visas, #private-supervisor {
                background: black;
                border-radius: 20px;
                border: solid black 4px;
                padding-bottom: 6px;
            }
            #private-basic h2, #private-general h2, #private-depts_and_visas h2, #private-supervisor h2 {
                margin: 0px;
                padding-top: 10px;
                padding-bottom: 8px;
                padding-left: 2%;
                text-align: left;
            }
            #private-basic div.input-group, #private-general div.input-group, #private-depts_and_visas div.input-group, #private-supervisor div.input-group {
                width: 96%;
                margin-left: 2%;
            }
            #body {
				margin-top: 50px;
				padding-top: 30px;
			}
            #public-info tr:hover {
                background: rgba(255, 255, 255, 1);
            }
        </style>
    </head>
    <body ng-app="app">
        <script>
            var app = angular.module('app', []);
        </script>
        <script>
            // debug data
            var user = {
            	_id: '5a19e78768e00a41307e93fe',
            	email: 'general@gmail.com',
            	password: '123123',
            	phone: '4155214118',
            	stop_time: '2018-01-01',
            	dept_names: ['Music', 'Computer Science'],
            	visa_types: ['PR', 'H-1B'],
            	working_email: 'group@ucdaivs.edu',
            	supervisor_name: 'Jodi Barnhill',
            	supervisor_email: 'jodi@ucdavis.edu',
            	note: 'I am nothing but a general case'
            };
			var users = [
				{ "_id" : "5a19e78768e00a41307e93fe", "email" : "general@gmail.com", "password" : "123123", "name" : "Xin Jin", "phone" : "4155214118", "stop_time" : "2018-11-25", "dept_names" : [ "Music", "East Asian Studies" ], "visa_types" : [ "J-1", "PR" ], "working_email" : "group@gamil.com", "supervisor_name" : "Jodi Barnhill", "supervisor_email" : "jodi@ucdavis.edu", "note" : null },
				{ "_id" : "5a19e7b368e00a41307e93ff", "email" : "many@gmail.com", "password" : "123123", "name" : "Xin Jin", "phone" : "4155214118", "stop_time" : "2018-05-25", "dept_names" : [ "Microbiology and Molecular Genetics", "Plant Biology", "Music", "Biological and Agricultural Engineering", "Viticulture and Enology", "East Asian Studies", "Economics", "Hemispheric Institute of the Americas" ], "visa_types" : [ "J-1", "PR" ], "working_email" : "group@gamil.com", "supervisor_name" : "Jodi Barnhill", "supervisor_email" : "jodi@ucdavis.edu", "note" : null },
				{ "_id" : "5a19e7cc68e00a41307e9400", "email" : "visa@gmail.com", "password" : "123123", "name" : "Xin Jin", "phone" : "4155214118", "stop_time" : "2018-02-25", "dept_names" : [ "Microbiology and Molecular Genetics", "Plant Biology", "Music", "Biological and Agricultural Engineering", "Viticulture and Enology", "East Asian Studies", "Economics", "Hemispheric Institute of the Americas" ], "visa_types" : [ "J-1", "H-1B", "O-1", "TN", "PR", "E" ], "working_email" : "group@gamil.com", "supervisor_name" : "Jodi Barnhill", "supervisor_email" : "jodi@ucdavis.edu", "note" : "I just got a lot visa" },
				{ "_id" : "5a1e61893803d8a7701f60a1", "email" : "ywl@ucdavis.edu", "password" : "123123", "name" : "Yin Weili", "phone" : "4152313123", "stop_time" : "2018-08-28", "dept_names" : [ "Theatre & Dance", "East Asian Studies" ], "visa_types" : [ "H-1B", "TN" ], "working_email" : null, "supervisor_name" : null, "supervisor_email" : null, "note" : null },
				{ "_id" : "5a1e61a93803d8a7701f60a2", "email" : "xuzheng@ucdavis.edu", "password" : "123123", "name" : "HLdf saf", "phone" : "5433455433", "stop_time" : "2018-08-28", "dept_names" : [ "Art and Art History", "East Asian Studies" ], "visa_types" : [ "H-1B" ], "working_email" : null, "supervisor_name" : null, "supervisor_email" : null, "note" : null }
			];
        </script>
        <nav id="header" class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-3 navbar-header">
                        <a class="navbar-brand express express-large active" onclick="togglePrivateInfo(this)">My Information <span class="caret"></span></a>
                        <div id="private-info">
                            <div id="private-basic">
                                <script>
                                    var h2PrivateBasic = function() {
                                        return '<h2 class="express express-medium">Basic Info</h2>';
                                    };
                                    var inputPrivateBasic = function(token, value) {
                                        var result = '';
                                        result += '<div class="input-group">';
                                        result += `<span class="input-group-addon"><i class="glyphicon glyphicon-${token}"></i></span>`;
                                        result += `<input class="form-control interact" readonly="readonly" value="${value}" />`;
                                        result += '</div>';
                                        return result;
                                    }
                                    var btnPrivateBasic = function(type, target, value) {
                                        var result = '';
                                        result += '<div class="input-group">';
                                        result += `<button class="btn btn-${type} btn-full interact" data-toggle="modal" data-target="${target}" type="button">${value}</button>`
                                        return result;
                                    };
                                    var privateBasic = function(user) {
                                        var result = '';
                                        result += h2PrivateBasic();
                                        result += inputPrivateBasic('user', user.email);
                                        result += inputPrivateBasic('calendar', user.stop_time);
                                        result += btnPrivateBasic('warning', '#model-change_password', 'Change password');
                                        result += btnPrivateBasic('danger', '#model-delete_user', 'Delete this user');
                                        return result;
                                    }
                                    </script>
                                <h2 class="express express-medium">Basic Info</h2>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                    <input class="form-control interact" readonly="readonly" value="general@gmail.com" />
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon">End Date</i></span>
                                    <input class="form-control interact" readonly="readonly" value="2018-01-01" />
                                </div>
                                <div class="input-group">
                                    <button class="btn btn-warning btn-full interact" data-toggle="modal" data-target="#model-change_password" type="button">Change password</button>
                                </div>
                                <div class="input-group">
                                    <button class="btn btn-danger btn-full interact" data-toggle="modal" data-target="#model-delete_user" type="button">Delete this user</button>
                                </div>
                            </div>
                            <div id="private-general">
                                <script>
                                    var h2PrivateGeneral = function() {
                                        return '<h2 class="express express-medium"><span><button class="btn btn-primary" onclick="toggleGeneralInfoLock()"><i class="glyphicon glyphicon-lock"></i></button></span>&nbsp;&nbsp;&nbsp;&nbsp;General Info</h2>';
                                    };
                                    var inputPrivateGeneral = function(token, value) {
                                        var result = '';
                                        result += '<div class="input-group">';
                                        result +=  `<span class="input-group-addon"><i class="glyphicon glyphicon-${token}"></i></span>`;
                                        result += `<input class="form-control interact" readonly="readonly" onchange="updateGeneralInfo()" value="${value}" />`;
                                        result += '</div>';
                                        return result;
                                    };
                                    var privateGeneral = function(user) {
                                        var result = '';
                                        result += h2PrivateGeneral();
                                        result += inputPrivateGeneral('user', user.name);
                                        result += inputPrivateGeneral('phone', user.phone);
                                        result += inputPrivateGeneral('envelope', (user.working_email || ''));
                                        result += inputPrivateGeneral('comment', (user.note || ''));
                                        return result;
                                    }
                                </script>
                                <h2 class="express express-medium"><span><button class="btn btn-primary" onclick="toggleGeneralInfoLock()"><i class="glyphicon glyphicon-lock"></i></button></span>&nbsp;&nbsp;&nbsp;&nbsp;General Info</h2>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                    <input class="form-control interact" readonly="readonly" onchange="updateGeneralInfo()" value="Xin Jin" />
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-phone"></i></span>
                                    <input class="form-control interact" readonly="readonly" onchange="updateGeneralInfo()" value="4155214118" />
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                                    <input class="form-control interact" readonly="readonly" onchange="updateGeneralInfo()" value="group@ucdavis.edu" />
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-comment"></i></span>
                                    <input class="form-control interact" readonly="readonly" onchange="updateGeneralInfo()" value="I am general case" />
                                </div>
                            </div>
                            <script>
                                var toggleGeneralInfoLock = function() {
                                	var token = $('#private-general h2 button i');
                                	if (token.hasClass('glyphicon-lock')) {
                                		token.removeClass('glyphicon-lock');
                                		token.addClass('glyphicon-edit');
                                		$('#private-general input').prop('readonly', false);
                                	} else {
                                		token.removeClass('glyphicon-edit');
                                		token.addClass('glyphicon-lock');
                                		$('#private-general input').prop('readonly', true);
                                	}
                                }
                                var updateGeneralInfo = function () {
                                	// TODO impl POST
                                };
                            </script>
                            <div id="private-depts_and_visas">
                                <script>
                                    var h2PrivateDeptsAndVisas = function() {
                                        return '<h2 class="express express-medium"><span><button class="btn btn-primary" data-toggle="modal" data-target="#model-update_depts_and_visas"><i class="glyphicon glyphicon-edit"></i></button></span>&nbsp;&nbsp;&nbsp;&nbsp;Departments and Visas</h2>';
                                    };
                                    var dropdownPrivateDeptsAndVisas = function(label, data) {
                                        var result = '';
                                        result += '<div class="input-group clearfix">';
                                        result += `<button class="btn btn-info btn-full dropdown-toggle interact" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">${label}<span class="caret"></span></button>`;
                                        result += '<ul class="dropdown-menu ul-wide ul-responsive">';
                                        result += `<li class="dropdown-header express-inverse express-small">${label}</li>`;
                                        for (var val of data) {
                                            result += `<li class="interact">${val}</li>`;
                                        }
                                        result += '</ul>';
                                        result += '</div>';
                                        return result;
                                    };
                                    var privateDeptsAndVisas = function(user) {
                                        var result = '';
                                        result += h2PrivateDeptsAndVisas();
                                        result += dropdownPrivateDeptsAndVisas('Departments', user.dept_names);
                                        result += dropdownPrivateDeptsAndVisas('Visas', user.visa_types);
                                        return result;
                                    };
                                </script>
                                <h2 class="express express-medium"><span><button class="btn btn-primary" data-toggle="modal" data-target="#model-update_depts_and_visas"><i class="glyphicon glyphicon-edit"></i></button></span>&nbsp;&nbsp;&nbsp;&nbsp;Departments and Visas</h2>
                                <div class="input-group clearfix">
                                    <button class="btn btn-info btn-full dropdown-toggle interact" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Departments<span class="caret"></span></button>
                                    <ul class="dropdown-menu ul-wide ul-responsive">
                                        <li class="dropdown-header express-inverse express-small">Departments</li>
                                        <li class="interact">Music</li>
                                        <li class="interact">East Asian Studies</li>
                                    </ul>
                                </div>
                                <div class="input-group clearfix">
                                    <button class="btn btn-info btn-full dropdown-toggle interact" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Visas<span class="caret"></span></button>
                                    <ul class="dropdown-menu ul-wide ul-responsive">
                                        <li class="dropdown-header express-inverse express-small">Visas</li>
                                        <li class="interact">J-1</li>
                                        <li class="interact">PR</li>
                                    </ul>
                                </div>
                            </div>
                            <div id="private-supervisor">
                                <script>
                                    var h2PrivateSupervisor = function() {
                                        return '<h2 class="express express-medium"><span><button class="btn btn-primary" onclick="toggleSupervisorLock()"><i class="glyphicon glyphicon-lock"></i></button></span>&nbsp;&nbsp;&nbsp;&nbsp;Supervisor Info</h2>';
                                    };
                                    var inputPrivateSupervisor = function(token, value) {
                                        var result = '';
                                        result += '<div class="input-group">';
                                        result += `<span class="input-group-addon"><i class="glyphicon glyphicon-${token}"></i></span>`;
                                        result += `<input class="form-control interact" readonly="readonly" onchange="updateSupervisor()" value="${value} />`;
                                        result += '</div>';
                                        return result;
                                    };
                                    var privateSupervisor = function(user) {
                                        var result = '';
                                        result += h2PrivateSupervisor();
                                        result += inputPrivateSupervisor('user', (user.supervisor_name || ''));
                                        result += inputPrivateSupervisor('envelope', (user.supervisor_email || ''));
                                        return result;
                                    };
                                </script>
                                <h2 class="express express-medium"><span><button class="btn btn-primary" onclick="toggleSupervisorLock()"><i class="glyphicon glyphicon-lock"></i></button></span>&nbsp;&nbsp;&nbsp;&nbsp;Supervisor Info</h2>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                    <input class="form-control interact" readonly="readonly" onchange="updateSupervisor()" value="Jodi Barnhill" />
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                                    <input class="form-control interact" readonly="readonly" onchange="updateSupervisor()" value="jodi@ucdavis.edu" />
                                </div>
                            </div>
                            <script>
                                var toggleSupervisorLock = function() {
                                	var token = $('#private-supervisor h2 button i');
                                	if (token.hasClass('glyphicon-lock')) {
                                		token.removeClass('glyphicon-lock');
                                		token.addClass('glyphicon-edit');
                                		$('#private-supervisor input').prop('readonly', false);
                                	} else {
                                		token.removeClass('glyphicon-edit');
                                		token.addClass('glyphicon-lock');
                                		$('#private-supervisor input').prop('readonly', true);
                                	}
                                };
                                var updateSupervisor = function() {
                                	// TODO impl POST
                                };
                            </script>
                        </div>
                        <script>
                            var togglePrivateInfo = function(ele) {
                            	var trigger = $(ele);
                            	if (trigger.hasClass('active')) {
                            		trigger.removeClass('active');
                            		$('#private-info').slideUp();
                            	} else {
                            		trigger.addClass('active');
                            		$('#private-info').slideDown();
                            	}
                            };
                        </script>
                    </div>
                    <div class="col-md-6 navbar-header">
                        <a class="navbar-brand express express-large">PICS - UC Davis Department Comtacts</a>
                    </div>
                    <div class="col-md-3 navbar-right">
                        <form class="navbar-form">
							<div class="input-group">
								<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
								<input class="form-control interact" oninput="search(this)" type="text" placeholder="Global search...">
							</div>
                        </form>
                    </div>
                </div>
            </div>
        </nav>
        <div id="body" class="container-fluid">
            <h1 class="page-header">UC Davis Department Contacts</h1>
            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th class="express-inverse express-medium">
                                Name
                                <div class="input-group">
									<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                                    <input class="form-control" type="text" oninput="query(this, 'name')" placeholder="Search for..." />
                                </div>
                            </th>
                            <th class="express-inverse express-medium">
                                Phone
                                <div class="input-group">
									<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                                    <input class="form-control" type="text" oninput="query(this, 'phone')" placeholder="Search for..." />
                                </div>
                            </th>
                            <th class="express-inverse express-medium">
                                Email
                                <div class="input-group">
									<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                                    <input class="form-control" type="text" oninput="query(this, 'email')" placeholder="Search for..." />
                                </div>
                            </th>
                            <th class="express-inverse express-medium">
                                Official University Email<br />(primary contact)
                                <div class="input-group">
									<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                                    <input class="form-control" type="text" oninput="query(this, 'working_email')" placeholder="Search for..." />
                                </div>
                            </th>
                            <th class="express-inverse express-medium">
                                Departments
                                <div class="input-group">
									<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                                    <input class="form-control" type="text" oninput="query(this, 'dept_names')" placeholder="Search for..." />
                                </div>
                            </th>
                            <th class="express-inverse express-medium">
                                Visa Types
                                <div class="input-group">
									<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                                    <input class="form-control" type="text" oninput="query(this, 'visa_types')" placeholder="Search for..." />
                                </div>
                            </th>
                            <th class="express-inverse express-medium">
                                Supervisor's Name
                                <div class="input-group">
									<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                                    <input class="form-control" type="text" oninput="query(this, 'supervisor_name')" placeholder="Search for..." />
                                </div>
                            </th>
                            <th class="express-inverse express-medium">
                                Supervisor's Email
                                <div class="input-group">
									<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
                                    <input class="form-control" type="text" oninput="query(this, 'supervisor_email')" placeholder="Search for..." />
                                </div>
                            </th>
                        </tr>
                    </thead>
                    <tbody id="public-info">
                        <script>
                            var td = function(value) {
                                if (typeof value == 'string') {
                                    return `<td class="interact">${value}</td>`;
                                } else {
                                    return `<td class="interact">${value.join(',<br />')}</td>`;
                                }
                            };
                            var tr = function(user) {
                                var result = '';
                                result += '<tr>';
                                result += td(user.name);
                                result += td(user.phone);
                                result += td(user.email);
                                result += td(user.working_email || '');
                                result += td(user.dept_names);
                                result += td(user.visa_types);
                                result += td(user.supervisor_name || '');
                                result += td(user.supervisor_email || '');
                                result += '</tr>';
                                if (user.note) {
                                    result += '<tr>';
                                    result += `<td class="note-public" colspan="8">Note: ${user.note}</td>`;
                                    result += '</tr>';
                                }
                                return result;
                            }
                            var publicInfo = function(users, filter) {
                                var usersSelected = filter(users);
                                var result = '';
                                for (var user of usersSelected) {
                                    result += tr(user);
                                }
                                return result;
                            }
                        </script>
						<tr>
							<td class="interact">Xin Jin</td>
							<td class="interact">4155214118</td>
							<td class="interact">general@gmail.com</td>
							<td class="interact">group@gamil.com</td>
							<td class="interact">Music,<br>East Asian Studies</td>
							<td class="interact">J-1,<br>PR</td>
							<td class="interact">Jodi Barnhill</td>
							<td class="interact">jodi@ucdavis.edu</td>
						</tr>
						<tr>
							<td class="interact">Xin Jin</td>
							<td class="interact">4155214118</td>
							<td class="interact">many@gmail.com</td>
							<td class="interact">group@gamil.com</td>
							<td class="interact">Microbiology and Molecular Genetics,<br>Plant Biology,<br>Music,<br>Biological and Agricultural Engineering,<br>Viticulture and Enology,<br>East Asian Studies,<br>Economics,<br>Hemispheric Institute of the Americas</td>
							<td class="interact">J-1,<br>PR</td>
							<td class="interact">Jodi Barnhill</td>
							<td class="interact">jodi@ucdavis.edu</td>
						</tr>
						<tr>
							<td class="interact">Xin Jin</td>
							<td class="interact">4155214118</td>
							<td class="interact">visa@gmail.com</td>
							<td class="interact">group@gamil.com</td>
							<td class="interact">Microbiology and Molecular Genetics,<br>Plant Biology,<br>Music,<br>Biological and Agricultural Engineering,<br>Viticulture and Enology,<br>East Asian Studies,<br>Economics,<br>Hemispheric Institute of the Americas</td>
							<td class="interact">J-1,<br>H-1B,<br>O-1,<br>TN,<br>PR,<br>E</td>
							<td class="interact">Jodi Barnhill</td>
							<td class="interact">jodi@ucdavis.edu</td>
						</tr>
						<tr>
							<td class="note-public" colspan="8">Note: I just got a lot visa</td>
						</tr>
						<tr>
							<td class="interact">Yin Weili</td>
							<td class="interact">4152313123</td>
							<td class="interact">ywl@ucdavis.edu</td>
							<td class="interact"></td>
							<td class="interact">Theatre &amp; Dance,<br>East Asian Studies</td>
							<td class="interact">H-1B,<br>TN</td>
							<td class="interact"></td>
							<td class="interact"></td>
						</tr>
						<tr>
							<td class="interact">HLdf saf</td>
							<td class="interact">5433455433</td>
							<td class="interact">xuzheng@ucdavis.edu</td>
							<td class="interact"></td>
							<td class="interact">Art and Art History,<br>East Asian Studies</td>
							<td class="interact">H-1B</td>
							<td class="interact"></td>
							<td class="interact"></td>
						</tr>
						<tr>
							<td class="interact">Xin Jin</td>
							<td class="interact">4155214118</td>
							<td class="interact">general@gmail.com</td>
							<td class="interact">group@gamil.com</td>
							<td class="interact">Music,<br>East Asian Studies</td>
							<td class="interact">J-1,<br>PR</td>
							<td class="interact">Jodi Barnhill</td>
							<td class="interact">jodi@ucdavis.edu</td>
						</tr>
						<tr>
							<td class="interact">Xin Jin</td>
							<td class="interact">4155214118</td>
							<td class="interact">many@gmail.com</td>
							<td class="interact">group@gamil.com</td>
							<td class="interact">Microbiology and Molecular Genetics,<br>Plant Biology,<br>Music,<br>Biological and Agricultural Engineering,<br>Viticulture and Enology,<br>East Asian Studies,<br>Economics,<br>Hemispheric Institute of the Americas</td>
							<td class="interact">J-1,<br>PR</td>
							<td class="interact">Jodi Barnhill</td>
							<td class="interact">jodi@ucdavis.edu</td>
						</tr>
						<tr>
							<td class="interact">Xin Jin</td>
							<td class="interact">4155214118</td>
							<td class="interact">visa@gmail.com</td>
							<td class="interact">group@gamil.com</td>
							<td class="interact">Microbiology and Molecular Genetics,<br>Plant Biology,<br>Music,<br>Biological and Agricultural Engineering,<br>Viticulture and Enology,<br>East Asian Studies,<br>Economics,<br>Hemispheric Institute of the Americas</td>
							<td class="interact">J-1,<br>H-1B,<br>O-1,<br>TN,<br>PR,<br>E</td>
							<td class="interact">Jodi Barnhill</td>
							<td class="interact">jodi@ucdavis.edu</td>
						</tr>
						<tr>
							<td class="note-public" colspan="8">Note: I just got a lot visa</td>
						</tr>
						<tr>
							<td class="interact">Yin Weili</td>
							<td class="interact">4152313123</td>
							<td class="interact">ywl@ucdavis.edu</td>
							<td class="interact"></td>
							<td class="interact">Theatre &amp; Dance,<br>East Asian Studies</td>
							<td class="interact">H-1B,<br>TN</td>
							<td class="interact"></td>
							<td class="interact"></td>
						</tr>
						<tr>
							<td class="interact">HLdf saf</td>
							<td class="interact">5433455433</td>
							<td class="interact">xuzheng@ucdavis.edu</td>
							<td class="interact"></td>
							<td class="interact">Art and Art History,<br>East Asian Studies</td>
							<td class="interact">H-1B</td>
							<td class="interact"></td>
							<td class="interact"></td>
						</tr>
						<tr>
							<td class="interact">Xin Jin</td>
							<td class="interact">4155214118</td>
							<td class="interact">general@gmail.com</td>
							<td class="interact">group@gamil.com</td>
							<td class="interact">Music,<br>East Asian Studies</td>
							<td class="interact">J-1,<br>PR</td>
							<td class="interact">Jodi Barnhill</td>
							<td class="interact">jodi@ucdavis.edu</td>
						</tr>
						<tr>
							<td class="interact">Xin Jin</td>
							<td class="interact">4155214118</td>
							<td class="interact">many@gmail.com</td>
							<td class="interact">group@gamil.com</td>
							<td class="interact">Microbiology and Molecular Genetics,<br>Plant Biology,<br>Music,<br>Biological and Agricultural Engineering,<br>Viticulture and Enology,<br>East Asian Studies,<br>Economics,<br>Hemispheric Institute of the Americas</td>
							<td class="interact">J-1,<br>PR</td>
							<td class="interact">Jodi Barnhill</td>
							<td class="interact">jodi@ucdavis.edu</td>
						</tr>
						<tr>
							<td class="interact">Xin Jin</td>
							<td class="interact">4155214118</td>
							<td class="interact">visa@gmail.com</td>
							<td class="interact">group@gamil.com</td>
							<td class="interact">Microbiology and Molecular Genetics,<br>Plant Biology,<br>Music,<br>Biological and Agricultural Engineering,<br>Viticulture and Enology,<br>East Asian Studies,<br>Economics,<br>Hemispheric Institute of the Americas</td>
							<td class="interact">J-1,<br>H-1B,<br>O-1,<br>TN,<br>PR,<br>E</td>
							<td class="interact">Jodi Barnhill</td>
							<td class="interact">jodi@ucdavis.edu</td>
						</tr>
						<tr>
							<td class="note-public" colspan="8">Note: I just got a lot visa</td>
						</tr>
						<tr>
							<td class="interact">Yin Weili</td>
							<td class="interact">4152313123</td>
							<td class="interact">ywl@ucdavis.edu</td>
							<td class="interact"></td>
							<td class="interact">Theatre &amp; Dance,<br>East Asian Studies</td>
							<td class="interact">H-1B,<br>TN</td>
							<td class="interact"></td>
							<td class="interact"></td>
						</tr>
						<tr>
							<td class="interact">HLdf saf</td>
							<td class="interact">5433455433</td>
							<td class="interact">xuzheng@ucdavis.edu</td>
							<td class="interact"></td>
							<td class="interact">Art and Art History,<br>East Asian Studies</td>
							<td class="interact">H-1B</td>
							<td class="interact"></td>
							<td class="interact"></td>
						</tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal fade" id="model-change_password" role="dialog">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Change Password</h4>
                    </div>
                    <div class="modal-body">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                            <input id="input-old_password" class="form-control interact" placeholder="Old password" />
                        </div>
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                            <input id="input-new_password" class="form-control interact" placeholder="New password" />
                        </div>
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                            <input id="input-new_password_retyped" class="form-control interact" placeholder="Retype new password" />
                        </div>
                        <div class="interact error" id="error-old_password_mismatch">Old password incorrect</div>
                        <div class="interact error" id="error-retyped_password_mismatch">Inconsistent new passwords</div>
                        <div class="interact error" id="error-short_password">New password has to be 6 characters or more</div>
                        <button class="btn btn-warning btn-full interact" onclick="changePassword()" type="button">Change password</button>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <script>
            var changePassword = function() {
            	// TODO impl changePassword
            };
        </script>
        <div class="modal fade" id="model-delete_user" role="dialog">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Delete This User</h4>
                    </div>
                    <div class="modal-body">
                        <p>This action <b>cannot</b> be undone. This will <b>permanently delete</b> all information of this user<br /><br />
                            Please type in your email <b><span id="span-user_email"></span></b> to confirm.
                        </p>
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input class="form-control interact" oninput="confirmEmail(this)" placeholder="Email" />
                        </div>
                        <button id="btn-delete_user" class="btn btn-danger btn-full interact" onclick="deleteUser()" type="button" disabled>Delete this user</button>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <script>
            $(document).ready(function() {
            	$('#span-user_email').text(user.email);
            });
            var confirmEmail = function(ele) {
            	if (ele.value == user.email) {
            		$('#btn-delete_user').prop('disabled', false);
            	} else {
            		$('#btn-delete_user').prop('disabled', true);
            	}
            };
            var deleteUser = function() {
            	// TODO: impl DELETE
            }
        </script>
        <div ng-controller="controller-update_depts_and_visas" class="modal fade" id="model-update_depts_and_visas" role="dialog">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Edit Departments and Visas</h4>
                    </div>
                    <div class="modal-body">
                        <div class="interact">Deparment - select department(s) for which you process visas. Please at least select 1 department</div>
                        <div class="input-group">
                            <select class="select-full selectpicker" id="select-dept_names" multiple ng-model="inputDeptNames" data-live-search="true">
                                <option class="interact" ng-repeat="deptNameChoice in deptNameChoices">{{deptNameChoice}}</option>
                            </select>
                        </div>
                        <br />
                        <div class="interact">Visa type(s) - Please at least select 1 visa type</div>
                        <div class="input-group">
                            <select class="select-full selectpicker" id="select-visa_types" multiple ng-model="inputVisaTypes" data-live-search="true">
                                <option class="interact" ng-repeat="visaTypeChoice in visaTypeChoices">{{visaTypeChoice}}</option>
                            </select>
                        </div>
                        <div class="error" id="error-empty_dept_names">Must choose at least 1 department.</div>
                        <div class="error" id="error-empty_visa_types">Must choose at least 1 visa type.</div>
                        <button class="btn btn-warning btn-full interact" onclick="updateDeptNamesAndVisaTypes()" type="button">Update</button>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <script>
            var visaTypes = ['J-1', 'H-1B', 'O-1', 'TN', 'PR', 'E'];
			var deptNames = ["Evolution & Ecology","Microbiology and Molecular Genetics","Molecular and Cellular Biology","Neurobiology Physiology and Behavior","Plant Biology","Art and Art History","Cinema & Technocultural Studies","Music","Theatre & Dance","Biological and Agricultural Engineering","Food Science and Technology","Textiles and Clothing","Viticulture and Enology","East Asian Studies","Economics","Hemispheric Institute of the Americas","History","Agricultural and Resource Economics","Environmental Science and Policy","Human Ecology","Animal Science","Nutrition","Anthropology","Middle East/South Asia Studies","Sociology","Environmental Toxicology","Land Air and Water Resources","Wildlife Fish and Conservation Biology","Communication","International Relations","Linguistics","Political Science","UC Center Sacramento (UCCS)","Entomology","Nematology","Plant Pathology","African American and African Studies","Agr and Envir Science Office of Dean","Agricultural Issues Center","Agricultural Sustainability Institute","Air Quality Research Center","American Studies","Asian American Studies","Biological Chemistry","Biomedical Engineering","Bodega Marine Laboratory","Budget and Institutional Analysis","California Institute of Food and Agricultural Research","California Lighting Technology Center","Center for Health & Technology","Center for Health and the Environment","Center for Healthcare Policy and Research","Center for Mind and Brain","Center for Molecular and Genomic Imaging","Center for Neuroscience","Center for Regional Change","Center for Science and Innovation Studies","Center for Student Affairs Assessement","Center for Transnational Health","Center for Watershed Sciences","Chancellor and Provost Office","Chemical Engineering and Materials Science","Chemistry","Chicana/o Studies","Civil and Environmental Engineering","Classics Program","Comparative Literature","Computer Science","Counseling and Psychological Services","Davis Language Center","Department of Design","Design and Construction Management","Division of Agriculture and Natural Resources","Earth and Planetary Sciences","East Asian Languages and Cultures","Electrical and Computer Engineering","Energy Institute","English","Facilities Management","French and Italian","Gender, Sexuality and Women's Studies","Genome Center","German Department","Global Affairs Confucius Institute","Global Affairs Fulbright","Global Affairs Humphrey","Global Affairs Sponsored Programs","Global Affairs Staff Exchange","Grad Group in Cultural Studies","Graduate School of Management","Hart Interdisciplinary Programs","Humanities Institute","Humanities, Arts and Cultural Studies","Information and Educational Technology","Institute for Governmental Affairs","Institute for Transportation Studies","Intercollegiate Athletics","International & Community Nutrition","International Law Programs","International Programs of the CA & ES","JMIE Center for Watershed Science","JMIE Road Ecology Center","JMIE Tahoe Environmental Research Center","Law School Dean's Office","Mathematics","McClellan Nuclear Research Center","Mechanical and Aerospace Engineering","MED Anesthesiology and Pain Medicine","MED Biochemistry and Molecular Medicine","MED Cancer Center","MED Cell Biology and Human Anatomy","MED Center for Biophotonics","MED Center for Musculoskeletal Health","MED Center for Reducing Health Disparities","MED Center for Virtual Care","MED Dermatology","MED Emergency Medicine","MED Family and Community Medicine","MED Global Health Sciences","MED Health Information Management","MED Hematology and Oncology","MED IM Aging and Education Center","MED IM Cardiovascular Medicine","MED IM Gastroenterology and Hepatology","MED IM Pulmonary and Critical Care Medicine","MED IM Rheumatology Allergy & Clinical Immunology","MED Imaging Research Center","MED Infectious Diseases","MED Institute for Population Health & Improvement","MED Internal Medicine","MED M.I.N.D. Institute","MED Medical Pathology","MED Microbiology and Immunology","MED Nephrology","MED Neurological Surgery","MED Neurology","MED Obstetrics and Gynecology","MED Office of Medical Education","MED Ophthalmology","MED Orthopaedic Surgery","MED Otolaryngology","MED Pathology and Laboratory Medicine","MED Patient Care Services Emergency Room","MED Pediatrics","MED Pharmacology","MED Physical Medicine and Rehabilitation","MED Physiology and Membrane Biology","MED Primary Care Network Operations","MED Psychiatry and Behavioral Medicine","MED Public Health Sciences","MED Radiation Oncology","MED Radiology","MED Stem Cell Program","MED Surgery","MED Urology","Mondavi Center","Native American Studies","NEAT ORU and Thermochemistry Unit","Nuclear Magnetic Resonance Facility","Office of the Vice Chancellor for Research","Olive Center","Other","Philosophy","Physical Education Program","Physics","Plant Sciences","Psychology","Religious Studies","Safety Services","School of Education","School of Nursing","Science and Technology Studies","Services for International Students and Scholars","Spanish Portuguese","Statistics","Student Health & Counseling Services","UC Cooperative Extension","University Extension","University Writing Program","VM Anatomy Physiology and Cell Biology","VM California Animal Health and Food Safety","VM California National Primate Research Center","VM Center for Companion Animal Health","VM Center for Comparative Medicine","VM Center for Equine Health","VM Center for Lab Animal Science","VM International Laboratory of Molecular Biology","VM Medicine & Epidemiology","VM Molecular Biosciences","VM One Health Institute","VM Pathology Microbiology and Immunology","VM Population Health and Reproduction","VM Surgical and Radiological Sciences","VM Veterinary Genetics Lab","VM Veterinary Medical Teaching Hospital","VM Veterinary Medicine Extension Public Programs","VM Veterinary Medicine Teaching and Research Center","VM Western Institute for Food Safety and Security","VM Wildlife Health Center","Western Cooling Efficiency Center", "Others (please indicate at Note)"];

            app.controller('controller-update_depts_and_visas', function($scope, $http) {
            	$scope.deptNameChoices = deptNames;
            	$scope.visaTypeChoices = visaTypes;
            	// TODO: impl POST
            })
        </script>
    </body>
</html>
