<html>
    <head>
        <style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>
        <meta charset="utf-8">
        <!-- jQuery 2.0.0 CDN -->
        <script src="http://code.jquery.com/jquery-2.0.0.js"></script>
        <!-- Angular CDN -->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
        <!-- bootstrap 3 CDN -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <!-- font -->
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <!-- customized packages -->
        <script src="js/exceptions.js"></script>
        <script src="js/date.js"></script>
        <script src="js/util.js"></script>
        <script src="js/crypto/core.js"></script>
        <script src="js/crypto/enc-base64.js"></script>
        <script src="js/crypto/hmac.js"></script>
        <script src="js/crypto/sha256.js"></script>
        <script src="js/crypto/util.js"></script>
        <title>Redirect - Debug</title>
        <style>
            .interact {
								font-size: 14px !important;
            }
						.express {
								color: rgba(235, 235, 235, 1) !important;
            }
            .express-inverse {
								color: rgba(0, 0, 0, 1) !important;
            }
            .express-large {
								font-size: 20px !important;
            }
            .express-medium {
								font-size: 18px !important;
            }
            .express-small {
								font-size: 16px !important;
            }
            .input-group {
								width: 100%;
            }
            .btn-full {
								width: 100%;
            }
            html, body {
								width: 100%;
								font-family: 'Roboto', sans-serif;
            }
            #header {
								height: 50px;
            }
            #header div a {
								margin: 0px;
								float: none;
								display: block;
								text-align: center;
            }
            #header div input {
								width: 100%;
            }
            body {
								background: rgba(170, 170, 170, 1);
            }
            
            .ul-wide {
								width: 60%;
								margin-left: 20%;
            }
            .ul-wide li.dropdown-header {
								padding-left: 4%;
            }
            .ul-wide li {
								padding-left: 6%;
            }
        </style>
    </head>
    <body>
        <script>
					// debug user
					var user = {
						_id: '5a19e78768e00a41307e93fe',
						email: 'general@gmail.com',
						password: '123123',
						phone: '4155214118',
						stop_time: '2018-01-01',
						dept_names: ['Music', 'Computer Science'],
						visa_types: ['PR', 'H-1B'],
						working_email: 'group@ucdaivs.edu',
						supervisor_name: 'Jodi Barnhill',
						supervisor_email: 'jodi@ucdavis.edu',
						note: 'I am nothing but a general case'
					};
        </script>
        <nav id="header" class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-3 navbar-header">
                        <a class="navbar-brand express express-large active" onclick="togglePrivateInfo(this)">My Information <span class="caret"></span></a>
                        <div id="private-info">
                            <div id="private-basic">
                                <h2 class="express express-medium">Basic Info</h2>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                    <input class="form-control interact" readonly="readonly" value="general@gmail.com" />
                                </div>
																<div class="input-group">
                                    <span class="input-group-addon">End Date</i></span>
                                    <input class="form-control interact" readonly="readonly" value="2018-01-01" />
                                </div>
                                <div class="input-group">
									<button class="btn btn-warning btn-full interact" data-toggle="modal" data-target="#model-change_password" type="button">Change password</button>
								</div>
                                <div class="input-group">
                                    <button class="btn btn-danger btn-full interact" data-toggle="modal" data-target="#model-delete_user" type="button">Delete this user</button>
                                </div>
                            </div>
                            <div id="private-general">
                                <h2 class="express express-medium"><span><button class="btn btn-primary" onclick="toggleGeneralInfoLock()"><i class="glyphicon glyphicon-lock"></i></button></span>&nbsp;&nbsp;&nbsp;&nbsp;General Info</h2>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                    <input class="form-control interact" readonly="readonly" onchange="updateGeneralInfo()" value="Xin Jin" />
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-phone"></i></span>
                                    <input class="form-control interact" readonly="readonly" onchange="updateGeneralInfo()" value="4155214118" />
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                                    <input class="form-control interact" readonly="readonly" onchange="updateGeneralInfo()" value="group@ucdavis.edu" />
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-comment"></i></span>
                                    <input class="form-control interact" readonly="readonly" onchange="updateGeneralInfo()" value="I am general case" />
                                </div>
                            </div>
														<script>
															var toggleGeneralInfoLock = function() {
																var token = $('#private-general h2 button i');
																if (token.hasClass('glyphicon-lock')) {
																	token.removeClass('glyphicon-lock');
																	token.addClass('glyphicon-edit');
																	$('#private-general input').prop('readonly', false);
																} else {
																	token.removeClass('glyphicon-edit');
																	token.addClass('glyphicon-lock');
																	$('#private-general input').prop('readonly', true);
																}
															}
															var updateGeneralInfo = function () {
																// TODO impl POST
															};
														</script>
                            <div id="private-depts_and_visas">
                                <h2 class="express express-medium"><span><button class="btn btn-primary" data-toggle="modal" data-target="#model-update_depts_and_visas"><i class="glyphicon glyphicon-edit"></i></button></span>&nbsp;&nbsp;&nbsp;&nbsp;Departments and Visas</h2>
                                <div class="input-group clearfix">
                                    <button class="btn btn-info btn-full dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Departments<span class="caret"></span></button>
                                    <ul class="dropdown-menu ul-wide">
                                        <li class="dropdown-header express-inverse express-small">Departments</li>
                                        <li class="interact">Music</li>
                                        <li class="interact">East Asian Studies</li>
                                    </ul>
                                </div>
                                <div class="input-group clearfix">
                                    <button class="btn btn-info btn-full dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Visas<span class="caret"></span></button>
                                    <ul class="dropdown-menu ul-wide">
                                        <li class="dropdown-header express-inverse express-small">Visas</li>
                                        <li class="interact">J-1</li>
                                        <li class="interact">PR</li>
                                    </ul>
                                </div>
                            </div>
                            <div id="private-supervisor">
                                <h2 class="express express-medium"><span><button class="btn btn-primary" onclick="toggleSupervisorLock()"><i class="glyphicon glyphicon-lock"></i></button></span>&nbsp;&nbsp;&nbsp;&nbsp;Supervisor Info</h2>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                    <input class="form-control interact" readonly="readonly" onchange="updateSupervisor()" value="Jodi Barnhill" />
                                </div>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                                    <input class="form-control interact" readonly="readonly" onchange="updateSupervisor()" value="jodi@ucdavis.edu" />
                                </div>
                            </div>
														<script>
															var toggleSupervisorLock = function() {
																var token = $('#private-supervisor h2 button i');
																if (token.hasClass('glyphicon-lock')) {
																	token.removeClass('glyphicon-lock');
																	token.addClass('glyphicon-edit');
																	$('#private-supervisor input').prop('readonly', false);
																} else {
																	token.removeClass('glyphicon-edit');
																	token.addClass('glyphicon-lock');
																	$('#private-supervisor input').prop('readonly', true);
																}
															};
															var updateSupervisor = function() {
																// TODO impl POST
															};
														</script>
                        </div>
												<style>
													#private-info {
														position: absolute;
														display: none;
													}
													#private-basic, #private-general, #private-depts_and_visas, #private-supervisor {
															background: black;
															border-radius: 20px;
															border: solid black 4px;
															padding-bottom: 6px;
													}
													#private-basic h2, #private-general h2, #private-depts_and_visas h2, #private-supervisor h2 {
															margin: 0px;
															padding-top: 10px;
															padding-bottom: 8px;
															padding-left: 2%;
															text-align: left;
													}
													#private-basic div.input-group, #private-general div.input-group, #private-depts_and_visas div.input-group, #private-supervisor div.input-group {
															width: 96%;
															margin-left: 2%;
													}
												</style>
												<script>
													var togglePrivateInfo = function(ele) {
														var trigger = $(ele);
														if (trigger.hasClass('active')) {
															trigger.removeClass('active');
															$('#private-info').slideUp();
														} else {
															trigger.addClass('active');
															$('#private-info').slideDown();
														}
													};
												</script>
                    </div>
                    <div class="col-md-6 navbar-header">
                        <a class="navbar-brand express express-large">PICS - UC Davis Department Comtacts</a>
                    </div>
                    <div class="col-md-3 navbar-right">
                        <form class="navbar-form">
                            <input class="form-control interact" oninput="search(this)" type="text" placeholder="Global search...">
                        </form>
                    </div>
                </div>
            </div>
        </nav>
        <div id="body" class="container-fluid">
        </div>
		<div class="modal fade" id="model-change_password" role="dialog">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Change Password</h4>
					</div>
					<div class="modal-body">
						<div class="input-group">
							<span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
							<input id="input-old_password" class="form-control interact" placeholder="Old password" />
						</div>
						<div class="input-group">
							<span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
							<input id="input-new_password" class="form-control interact" placeholder="New password" />
						</div>
						<div class="input-group">
							<span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
							<input id="input-new_password_retyped" class="form-control interact" placeholder="Retype new password" />
						</div>
						<div class="interact error" id="error-old_password_mismatch">Old password incorrect</div>
						<div class="interact error" id="error-retyped_password_mismatch">Inconsistent new passwords</div>
						<div class="interact error" id="error-short_password">New password has to be 6 characters or more</div>
						<button class="btn btn-warning btn-full interact" onclick="changePassword()" type="button">Change password</button>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
		<style>
			.error {
				color: red;
				display: none;
			}
		</style>
		<script>
			var changePassword = function() {
				// TODO impl changePassword
			};	
		</script>
		<div class="modal fade" id="model-delete_user" role="dialog">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Delete This User</h4>
					</div>
					<div class="modal-body">
						<p>This action <b>cannot</b> be undone. This will <b>permanently delete</b> all information of this user<br /><br />
							Please type in your email <b><span id="span-user_email"></span></b> to confirm.</p>
						<div class="input-group">
							<span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
							<input class="form-control interact" oninput="confirmEmail(this)" placeholder="Email" />
						</div>
						<button id="btn-delete_user" class="btn btn-danger btn-full interact" onclick="deleteUser()" type="button" disabled>Delete this user</button>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
		<script>
			var user = {
				_id: '5a19e78768e00a41307e93fe',
				email: 'general@gmail.com'
			};
			$(document).ready(function() {
				$('#span-user_email').text(user.email);
			});
			var confirmEmail = function(ele) {
				if (ele.value == user.email) {
					$('#btn-delete_user').prop('disabled', false);
				} else {
					$('#btn-delete_user').prop('disabled', true);
				}
			};
			var deleteUser = function() {
				// TODO: impl DELETE
			}
		</script>
		<div class="modal fade" id="model-update_depts_and_visas" role="dialog">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Edit Departments and Visas</h4>
					</div>
					<div class="modal-body">
						<!-- TODO edit dept_names and visa_types -->
						<button class="btn btn-warning btn-full interact" onclick="updateDeptNamesAndVisaTypes()" type="button">Update</button>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
    </body>
</html>