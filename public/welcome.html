<!-- TODO password retrive -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Public Information Collecting Service - sissdata" />
    <meta name="author" content="Xin Jin" />
    <link rel="icon" href="img/favicon.ico" />
    <title>PICS - UC Davis department contact</title>
    <!-- jQuery 2.0.0 CDN -->
    <script src="http://code.jquery.com/jquery-2.0.0.js"></script>
    <!-- Angular CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    <!-- bootstrap 3 CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!-- daterangepicker CDN -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css" />
    <!-- bootstrap select CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
    <!-- bootstrap form -->
    <script src="js/bootstrap-formhelpers.min.js"></script>
    <!-- customized packages -->
    <script src="js/exceptions.js"></script>
    <script src="js/date.js"></script>
    <script src="js/util.js"></script>
    <script src="js/crypto/core.js"></script>
    <script src="js/crypto/enc-base64.js"></script>
    <script src="js/crypto/hmac.js"></script>
    <script src="js/crypto/sha256.js"></script>
    <script src="js/crypto/util.js"></script>
    <script src="js/welcome.js"></script>
    <link rel="stylesheet" href="css/util.css" />
    <link rel="stylesheet" href="css/welcome.css" />
</head>
    <body ng-app="app">
        <script src="js/welcome-http.js"></script>
        <h1>UC Davis departmental contact update</h1>
        <p class="intro">Please use the form below to update SISS staff with the details of each department for which you process visa requests.</p>
        <!-- sign up -->
        <div ng-controller="controller-signup" class="container">
            <form class="form-signin">
                <h2 class="form-signin-heading">Create an account</h2>
                <p>Already have an account? Please <a onclick="signupToLogin()">Login</a></p>
                <div class="input-field" id="field-email">
                    <div class="illustration">Email address - this will be your login id</div>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                        <input type="text" id="input-email" ng-model="inputEmail" class="form-control" placeholder="Email address" autofocus />
                    </div>
                    <div class="error" id="error-empty_email">Email address is required.</div>
                    <div class="error" id="error-invalid_email">Invalid email address.</div>
                    <div class="error" id="error-email_exists">Email address already exists, you can <a onclick="signupToLogin()">Login</a> here.</div>
                </div>
                <div class="input-field" id="field-password">
                    <div class="illustration">Password</div>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                        <input type="password" id="input-password" ng-model="inputPassword" class="form-control" placeholder="Password" />
                    </div>
                    <div class="error" id="error-empty_password">Password is required.</div>
                    <div class="error" id="error-short_password">Password has to be 6 characters or more.</div>
                </div>
                <div class="input-field" id="field-password-retype">
                    <div class="illustration">Retype password</div>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                        <input type="password" id="input-password-retype" class="form-control" placeholder="Retype Password" />
                    </div>
                    <div class="error" id="error-password_mismatch">Password mismatch</div>
                </div>
                <div class="input-field" id="field-name">
                    <div class="illustration">Full name (Firstname Lastname, ex: John Smith)</div>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                        <input type="text" id="input-name" ng-model="inputName" class="form-control" placeholder="Your Name" />
                    </div>
                    <div class="error" id="error-empty_name">Full name is required.</div>
                </div>
                <div class="input-field" id="field-phone">
                    <div class="illustration">Phone number</div>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-phone"></i></span>
                        <input type="text" id="input-phone" ng-model="inputPhone" class="form-control bfh-phone" data-format="(ddd) ddd-dddd" />
                    </div>
                    <div class="error" id="error-empty_phone">Phone number is required.</div>
                </div>
                <div class="input-field" id="field-stop_time">
                    <div class="illustration">End date - the information you provide here will be considered valid until this date</div>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                        <input type="text" id="input-stop_time" ng-model="inputStopTime" class="form-control" />
                    </div>
                    <div class="btn-group btn-group-justified">
                        <a class="btn btn-info" onclick="setMonthGap(3)">3 Months</a>
                        <a class="btn btn-info" onclick="setMonthGap(6)">6 Months</a>
                        <a class="btn btn-info" onclick="setMonthGap(9)">9 Months</a>
                        <a class="btn btn-info" onclick="setMonthGap(12)">1 Year (maximum)</a>
                    </div>
                    <div class="error" id="error-empty_stop_time">End date is required.</div>
                </div>
                <div class="input-field" id="field-dept_names">
                    <div class="illustration">Deparment - select department(s) for which you process visas. Please at least select 1 department</div>
                    <select class="selectpicker" id="select-dept_names" multiple ng-model="inputDeptNames" data-live-search="true" data-selected-text-format="count > 3">
                        <option ng-repeat="deptNameChoice in deptNameChoices">{{deptNameChoice}}</option>
                    </select>
                    <div class="error" id="error-empty_dept_names">Must choose at least 1 department.</div>
                </div>
                <div class="input-field" id="field-visa_types">
                    <div class="illustration">Visa type(s) - Please at least select 1 visa type</div>
                    <select class="selectpicker" id="select-visa_types" multiple ng-model="inputVisaTypes" data-live-search="true" data-selected-text-format="count > 3">
                        <option ng-repeat="visaTypeChoice in visaTypeChoices">{{visaTypeChoice}}</option>
                    </select>
                    <div class="error" id="error-empty_visa_types">Must choose at least 1 visa type.</div>
                </div>
                <div class="input-field" id="field-working_email">
                    <div class="illustration">Official University Email</div>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                        <input type="text" id="input-working_email" ng-model="inputWorkingEmail" class="form-control" placeholder="Official University Email" />
                    </div>
                    <div class="error" id="error-invalid_working_email">Invalid email address.</div>
                </div>
                <div class="input-field" id="field-supervisor_name">
                    <div class="illustration">Supervisor's Name - your supervisor's name</div>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                        <input type="text" id="input-supervisor_name" ng-model="inputSupervisorName" class="form-control" placeholder="Supervisor's Name" />
                    </div>
                </div>
                <div class="input-field" id="field-supervisor_email">
                    <div class="illustration">Supervisor's Email</div>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                        <input type="text" id="input-supervisor_email" ng-model="inputSupervisorEmail" class="form-control" placeholder="Supervisor's Email" />
                    </div>
                    <div class="error" id="error-invalid_supervisor_email">Invalid supervisor email.</div>
                </div>
                <div class="input-field" id="field-note">
                    <div class="illustration">Note - any additional information you would like to provide</div>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-comment"></i></span>
                        <input type="text" id="input-note" ng-model="inputNote" class="form-control" placeholder="Note" />
                    </div>
                </div>
                <div class="error" id="error-invalid_signup">Information above has error. Please fix errors</div>
                <button ng-click="signup()" type="submit" class="btn btn-lg btn-primary btn-block">Create my account</button>
            </form>
        </div>
        <!-- login -->
        <div ng-controller="controller-login" class="container">
            <form class="form-signin">
                <h2 class="form-signin-heading">Login</h2>
                <p>Back to <a onclick="loginToSignup()">Sign Up</a></p>
                <p><a data-toggle="modal" data-target="#model-retrieve_password">Forgot password?</a></p>
                <div class="input-field" id="field-email-login">
                    <div class="illustration">User Email</div>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                        <input id="input-email-login" ng-model="inputEmail" required type="text" class="form-control" placeholder="User Email" />
                    </div>
                </div>
                <div class="input-field" id="field-password-login">
                    <div class="illustration">User Password</div>
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                        <input id="input-password-login" ng-model="inputPassword" required type="password" class="form-control" placeholder="User Password" />
                    </div>
                </div>
                <div class="error-login" id="error-incorrect">Wrong email/password</div>
                <button ng-click="login()" type="submit" class="btn btn-lg btn-primary btn-block">Login</button>
            </form>
        </div>
        <div class="modal fade" id="model-retrieve_password" role="dialog">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Retrieve Password</h4>
                    </div>
                    <div class="modal-body">
                        <div class="interact">You may retrieve your password through email</div>
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input class="form-control interact" placeholder="Email" />
                        </div>
                        <div class="error" id="error-no_email">No such user</div>
                        <button class="btn btn-warning btn-full interact" onclick="retrievePassword()" type="button">Update</button>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <script>
            var setMonthGap, signupToLogin, loginToSignup, signupValidate;
        </script>
        <script>
            // password retrieve toggle
            $(document).ready(function() {
                $('#anchor-forgot_password').click(function() {
                    $('#model-forgot_password').modal('show');
                });
            });
            // password retrieve service
            var retrievePassword = function() {
                // TODO impl email
            };
        </script>
    </body>
</html>
